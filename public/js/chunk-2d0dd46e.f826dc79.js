(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0dd46e"],{8165:function(t,s,e){"use strict";e.r(s);e("d81d"),e("4de4"),e("d3b7");var a=function(){var t=this,s=t._self._c;return s("div",{staticClass:"reports"},[s("h4",{staticClass:"fw-bold py-3 mb-4 d-flex"},[s("span",{staticClass:"mr-auto"},[t._v(" "+t._s(t.$trans("Deposit"))+" ")]),s("button",{staticClass:"btn btn-outline-primary btn-sm mr-3",on:{click:function(s){t.formFilter=!t.formFilter}}},[s("svg",{staticClass:"css-i6dzq1 mr-1",attrs:{viewBox:"0 0 24 24",width:"16",height:"16",stroke:"currentColor","stroke-width":"2",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"}},[s("polygon",{attrs:{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"}})]),t._v(" "+t._s(t.$trans("Filter"))+" ")])]),t.formFilter?s("div",{staticClass:"form-filter mb-3 card"},[s("div",{staticClass:"card-body"},[s("div",{staticClass:"d-flex"},[s("div",{staticClass:"form-group mr-3"},[s("label",{staticClass:"d-block"},[t._v(t._s(t.$trans("Keyword")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filterQuery.keyword,expression:"filterQuery.keyword"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.filterQuery.keyword},on:{input:function(s){s.target.composing||t.$set(t.filterQuery,"keyword",s.target.value)}}})]),s("div",{staticClass:"form-group mr-3"},[s("label",{staticClass:"d-block"},[t._v(t._s(t.$trans("Method")))]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.filterQuery.method,expression:"filterQuery.method"}],staticClass:"form-control w-200",on:{change:function(s){var e=Array.prototype.filter.call(s.target.options,(function(t){return t.selected})).map((function(t){var s="_value"in t?t._value:t.value;return s}));t.$set(t.filterQuery,"method",s.target.multiple?e:e[0])}}},[s("option",{attrs:{value:"all"}},[t._v(t._s(t.$trans("All")))]),s("option",{attrs:{value:"IB"}},[t._v(t._s(t.$trans("IB")))]),s("option",{attrs:{value:"BT"}},[t._v(t._s(t.$trans("BT")))]),s("option",{attrs:{value:"QRPAY"}},[t._v(t._s(t.$trans("QRPAY")))]),s("option",{attrs:{value:"MOMO"}},[t._v(t._s(t.$trans("MOMO")))]),s("option",{attrs:{value:"ZALO"}},[t._v(t._s(t.$trans("ZALO")))])])]),s("div",{staticClass:"form-group mr-3"},[s("label",{staticClass:"d-block"},[t._v(t._s(t.$trans("Status")))]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.filterQuery.status,expression:"filterQuery.status"}],staticClass:"form-control w-200",on:{change:function(s){var e=Array.prototype.filter.call(s.target.options,(function(t){return t.selected})).map((function(t){var s="_value"in t?t._value:t.value;return s}));t.$set(t.filterQuery,"status",s.target.multiple?e:e[0])}}},[s("option",{attrs:{value:"all"}},[t._v(t._s(t.$trans("All")))]),t._l(t.deposit_status,(function(e,a){return s("option",{key:a,domProps:{value:a}},[t._v(t._s(e))])}))],2)])]),s("div",{staticClass:"d-flex mb-3"},[s("div",{staticClass:"form-group mr-3"},[s("label",{staticClass:"d-block"},[t._v(t._s(t.$trans("From")))]),s("date-picker",{staticClass:"w-200",model:{value:t.filterQuery.from,callback:function(s){t.$set(t.filterQuery,"from",s)},expression:"filterQuery.from"}})],1),s("div",{staticClass:"form-group mr-3"},[s("label",{staticClass:"d-block"},[t._v(t._s(t.$trans("To")))]),s("date-picker",{staticClass:"w-200",model:{value:t.filterQuery.to,callback:function(s){t.$set(t.filterQuery,"to",s)},expression:"filterQuery.to"}})],1)]),s("div",{staticClass:"filter-actions d-flex"},[s("button",{staticClass:"btn btn-outline-danger btn-sm mr-3",on:{click:t.reset_filter}},[t._v(t._s(t.$trans("Reset")))]),s("button",{staticClass:"btn btn-outline-primary btn-sm mr-3",on:{click:t.filter}},[t.process_loading?s("div",{staticClass:"spinner-border spinner-border-sm text-secondary"}):t._e(),t._v(" "+t._s(t.$trans("Apply"))+" ")]),t.json_data&&t.json_data.length?s("download-csv",{attrs:{labels:t.labels,data:t.json_data,name:t.export_file_name}},[s("button",{staticClass:"btn btn-sm btn-primary"},[t._v(t._s(t.$trans("Download")))])]):s("button",{staticClass:"btn btn-primary btn-sm mr-3",on:{click:t.export_transaction}},[t.process_export_loading?s("div",{staticClass:"spinner-border spinner-border-sm text-secondary"}):t._e(),t._v(" "+t._s(t.$trans("Export"))+" ")])],1)])]):t._e(),s("div",{staticClass:"card"},[s("div",{staticClass:"card-body"},[t.transactions&&t.transactions.data?t._t("default",(function(){return[s("div",{staticClass:"table-responsive"},[s("div",{staticClass:"list-info mb-3"},[s("small",[t._v(" "+t._s(t.$trans("Results"))+": "),s("strong",[t._v(t._s(t.transactions.data.length))]),t._v(" "+t._s(t.$trans("of"))+" "),s("strong",[t._v(" "+t._s(t.transactions.total)+" ")])])]),s("table",{staticClass:"table table-striped"},[s("thead",[s("tr",[s("th",[t._v(t._s(t.$trans("Ref Number")))]),s("th",[t._v(t._s(t.$trans("Method")))]),s("th",[t._v(t._s(t.$trans("Order ID")))]),s("th",[t._v(t._s(t.$trans("Card")))]),s("th",[t._v(t._s(t.$trans("Pin")))]),s("th",[t._v(t._s(t.$trans("Serial")))]),s("th",{staticClass:"text-right"},[t._v(t._s(t.$trans("Amount")))]),s("th",{staticClass:"text-right"},[t._v(t._s(t.$trans("Real Amount")))]),s("th",{staticClass:"text-right"},[t._v(t._s(t.$trans("Fee")))]),s("th",[t._v(t._s(t.$trans("Date")))]),s("th",[t._v(t._s(t.$trans("Finish Time")))]),s("th",[t._v(t._s(t.$trans("Time elapsed")))]),s("th",[t._v(t._s(t.$trans("Status")))]),s("th",[t._v(t._s(t.$trans("Note")))])])]),s("tbody",t._l(t.transactions.data,(function(e,a){return s("tr",{key:a},[s("td",[t._v(t._s(e.ref_number))]),s("td",[s("span",{staticClass:"badge badge-success"},[t._v(" "+t._s(e.method)+" ")])]),s("td",[t._v(t._s(e.order_id))]),s("td",["THECAO"==e.method?t._t("default",(function(){return[t._v(t._s(e.type))]})):t._e()],2),s("td",["THECAO"==e.method?t._t("default",(function(){return[t._v(t._s(e.pin))]})):t._e()],2),s("td",["THECAO"==e.method?t._t("default",(function(){return[t._v(t._s(e.serial))]})):t._e()],2),s("td",{staticClass:"text-right text-success"},[s("vue-numeric",{attrs:{"currency-symbol-position":"suffix",currency:"",value:e.amount,"read-only":!0,precision:0}})],1),s("td",{staticClass:"text-right text-success"},[s("vue-numeric",{attrs:{"currency-symbol-position":"suffix",currency:"",value:e.real_amount,"read-only":!0,precision:0}})],1),s("td",{staticClass:"text-right text-success"},[s("vue-numeric",{attrs:{"currency-symbol-position":"suffix",currency:"",value:e.fee,"read-only":!0,precision:0}})],1),s("td",[t._v(t._s(e.created_at))]),s("td",[e.finish_time?t._t("default",(function(){return[t._v(t._s(e.finish_time))]})):t._t("default",(function(){return[t._v("-")]}))],2),s("td",[e.time_elapsed?t._t("default",(function(){return[s("vue-numeric",{attrs:{"currency-symbol-position":"suffix",currency:"min",value:e.time_elapsed,"read-only":!0,precision:2}})]})):t._t("default",(function(){return[t._v("-")]}))],2),s("td",[1==e.status?s("span",{staticClass:"badge badge-success badge-pill"},[t._v(" "+t._s(t.$trans("Success"))+" ")]):t._e(),2==e.status?s("span",{staticClass:"badge badge-warning badge-pill"},[t._v(" "+t._s(t.$trans("Pending"))+" ")]):t._e(),3==e.status?s("span",{staticClass:"badge badge-info badge-pill"},[t._v(" "+t._s(t.$trans("Processing"))+" ")]):t._e(),0==e.status?s("span",{staticClass:"badge badge-warning badge-pill"},[t._v(" "+t._s(t.$trans("Hold"))+" ")]):t._e(),-1==e.status?s("span",{staticClass:"badge badge-danger badge-pill"},[t._v(" "+t._s(t.$trans("Reject"))+" ")]):t._e(),e.status<-1?t._t("default",(function(){return[-4==e.status?s("span",{staticClass:"badge badge-dark badge-pill"},[t._v(" "+t._s(t.deposit_status[e.status])+" ")]):s("span",{staticClass:"badge badge-danger badge-pill"},[t._v(" "+t._s(t.deposit_status[e.status])+" ")])]})):t._e()],2),s("td",[t._v(t._s(e.note))])])})),0)])]),t.transactions&&t.transactions.data&&t.transactions.last_page?s("paginate",{attrs:{"page-count":t.transactions.last_page,"click-handler":t.paginate,"prev-text":t.$trans("Previous"),"next-text":t.$trans("Next"),"page-class":"page-item","prev-class":"page-item","next-class":"page-item","page-link-class":"page-link","prev-link-class":"page-link","next-link-class":"page-link","container-class":"pagination"}}):t._e()]})):t._e()],2)])])},r=[],n=(e("159b"),e("14d9"),e("bc3a")),i=e.n(n),o=e("c1df"),l=e.n(o),c={name:"Deposit",data:function(){return{transactions:null,filterQuery:{page:1,from:null,to:new Date,method:"all",keyword:"",status:"all",bank:"all"},transaction:null,showDetail:!1,tabActive:"detail",errors:{},process:!1,reason:"",alert:null,formFilter:!1,process_loading:!1,export_data:null,process_export_loading:null,labels:{ref_number:"REF NUMBER",method:"METHOD",order_id:"ORDER ID",amount:"AMOUNT",real_amount:"REAL AMOUNT",fee:"FEE",date:"DATE",finish_time:"FINISH TIME",time_elapsed:"TIME ELAPSED (MIN)",status:"STATUS"}}},mounted:function(){var t=new Date;this.filterQuery.from=new Date(t.getFullYear(),t.getMonth(),1)},methods:{filter:function(){this.filterQuery.page=1,this.index()},paginate:function(t){this.filterQuery.page=t,this.index()},index:function(){var t=this;this.process_loading=!0,i()({url:this.$root.$data.api_url+"/api/client/deposit/transactions",params:this.filterQuery,method:"GET"}).then((function(s){t.transactions=s.data,t.process_loading=!1})).catch((function(s){console.log(s),t.process_loading=!1}))},export_transaction:function(){var t=this;this.process_export_loading=!0,i()({url:this.$root.$data.api_url+"/api/client/deposit/transactions/export",params:this.filterQuery,method:"GET"}).then((function(s){t.export_data=s.data,t.process_export_loading=!1})).catch((function(s){console.log(s),t.process_export_loading=!1}))},reset_filter:function(){var t=new Date;this.filterQuery={from:new Date(t.getFullYear(),t.getMonth(),1),to:new Date,page:1,method:"all",keyword:"",status:"all",bank:"all",client_id:null},this.export_data=null,this.index()}},created:function(){this.index()},computed:{deposit_status:function(){return this.$root.$data.global_settings.deposit_status},bank_supports:function(){return this.$root.$data.global_settings.bank_supports},json_data:function(){var t=this,s=[];if(this.export_data){var e=this.export_data;e.forEach((function(e){var a=t.deposit_status[e.status],r={ref_number:e.ref_number,method:e.method,order_id:e.order_id,amount:e.amount,real_amount:e.real_amount,fee:e.fee,date:e.created_at,finish_time:e.finish_time,time_elapsed:e.time_elapsed,status:a};s.push(r)}))}return s},export_file_name:function(){var t="",s="";return t=l()(this.filterQuery.from).format("YYYY-MM-DD"),s=l()(this.filterQuery.to).format("YYYY-MM-DD"),"deposit-transactions-"+t+"-"+s+".csv"}}},u=c,d=e("2877"),_=Object(d["a"])(u,a,r,!1,null,"0cd3341f",null);s["default"]=_.exports}}]);
//# sourceMappingURL=chunk-2d0dd46e.f826dc79.js.map